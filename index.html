<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Nexus Transport PR</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Sistema profesional de gestión de transporte por millas" />

  <!-- Styles -->
  <link rel="stylesheet" href="styles.css" />

  <!-- Firebase SDK (CDN, sin bundlers) -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
</head>

<body>

<!-- =========================
     TOP BAR
========================= -->
<header class="topbar">
  <div class="brand">
    <div class="logo">NT</div>
    <div>
      <div class="brandName">Nexus Transport PR</div>
      <div class="brandSub">Control profesional de servicios por millas</div>
    </div>
  </div>

  <nav class="nav" id="mainNav" style="display:none">
    <button class="tab active" data-view="dashboard">Dashboard</button>
    <button class="tab" data-view="driver" id="tabDriver">Chofer</button>
    <button class="tab" data-view="admin" id="tabAdmin">Admin</button>
    <button class="tab" id="btnLogout">Salir</button>
  </nav>
</header>

<div class="container">

<!-- =========================
     LOGIN VIEW
========================= -->
<section id="view-login" class="card">
  <h2>Acceso seguro</h2>
  <p class="muted">Autenticación con Google + PIN</p>

  <div class="bigActions">
    <button id="btnGoogleLogin" class="btnXL primary">
      Entrar con Google
    </button>
  </div>

  <div class="hr"></div>

  <div class="formRow">
    <input
      type="password"
      id="pinInput"
      placeholder="Ingrese su PIN"
      autocomplete="off"
    />
    <button id="btnPinConfirm" class="btn">
      Confirmar PIN
    </button>
  </div>

  <div id="loginMsg" class="muted"></div>
</section>

<!-- =========================
     DASHBOARD VIEW
========================= -->
<section id="view-dashboard" class="view">

  <div class="grid2">
    <div class="card">
      <div class="kpiTitle">Semana actual</div>
      <div class="kpiValue" id="kpiWeekNet">$0.00</div>
      <div class="kpiSub">Neto chofer (si aplica)</div>
    </div>

    <div class="card">
      <div class="kpiTitle">Servicios</div>
      <div class="kpiValue" id="kpiWeekServices">0</div>
      <div class="kpiSub">Registrados</div>
    </div>

    <div class="card">
      <div class="kpiTitle">Millas</div>
      <div class="kpiValue" id="kpiWeekMiles">0</div>
      <div class="kpiSub">Totales</div>
    </div>

    <div class="card">
      <div class="kpiTitle">Rol activo</div>
      <div class="kpiValue" id="kpiRole">—</div>
      <div class="kpiSub">Permisos</div>
    </div>
  </div>

  <div class="card">
    <h2>Actividad reciente</h2>
    <div class="tableWrap">
      <table class="table">
        <thead>
          <tr>
            <th>Fecha</th>
            <th>Cliente</th>
            <th>Chofer</th>
            <th class="num">Millas</th>
            <th class="num">Neto</th>
          </tr>
        </thead>
        <tbody id="dashboardRecent"></tbody>
      </table>
    </div>
  </div>

</section>

<!-- =========================
     DRIVER VIEW
========================= -->
<section id="view-driver" class="view">

  <div class="card">
    <h2>Registrar servicio</h2>
    <p class="muted">El sistema calcula automáticamente el pago neto</p>

    <div class="formGrid">
      <label>
        Cliente
        <select id="drvClient"></select>
      </label>

      <label>
        Tipo de servicio
        <select id="drvServiceType">
          <option value="REMOLQUE">Remolque</option>
          <option value="ASISTENCIA">Asistencia</option>
          <option value="OTRO">Otro</option>
        </select>
      </label>

      <label>
        Millas
        <input type="number" id="drvMiles" step="0.1" min="0" />
      </label>

      <label class="full">
        Nota
        <input type="text" id="drvNote" />
      </label>
    </div>

    <div class="actions">
      <button id="btnDrvSave" class="btn primary">
        Guardar servicio
      </button>
    </div>
  </div>

  <div class="card">
    <h2>Mi historial</h2>

    <div class="filters">
      <label>
        Desde
        <input type="date" id="drvFromDate" />
      </label>
      <label>
        Hasta
        <input type="date" id="drvToDate" />
      </label>
      <button id="btnDrvFilter" class="btn">
        Filtrar
      </button>
    </div>

    <div class="tableWrap">
      <table class="table">
        <thead>
          <tr>
            <th>Fecha</th>
            <th>Cliente</th>
            <th class="num">Millas</th>
            <th class="num">Neto chofer</th>
          </tr>
        </thead>
        <tbody id="driverHistory"></tbody>
      </table>
    </div>
  </div>

</section>

<!-- =========================
     ADMIN VIEW
========================= -->
<section id="view-admin" class="view">

  <!-- CLIENTES -->
  <div class="card">
    <h2>Clientes y tarifas</h2>

    <div class="formRow">
      <input id="admClientName" placeholder="Nombre del cliente" />
      <input id="admClientRate" type="number" step="0.01" placeholder="Tarifa por milla" />
      <label>
        <input type="checkbox" id="admClientConnect" />
        Aplica ajuste Connect
      </label>
      <button id="btnAddClient" class="btn primary">
        Agregar cliente
      </button>
    </div>

    <div class="tableWrap">
      <table class="table">
        <thead>
          <tr>
            <th>Cliente</th>
            <th class="num">Tarifa</th>
            <th>Connect</th>
          </tr>
        </thead>
        <tbody id="adminClients"></tbody>
      </table>
    </div>
  </div>

  <!-- REPORTES -->
  <div class="card">
    <h2>Reportes y cierres</h2>

    <div class="filters">
      <label>
        Semana desde
        <input type="date" id="admWeekStart" />
      </label>

      <button id="btnBuildWeekly" class="btn primary">
        Generar cierre semanal
      </button>
    </div>

    <div id="adminWeeklyReport" class="invoice"></div>

    <div class="actions">
      <button id="btnExportPDF" class="btn">
        Exportar PDF
      </button>
    </div>
  </div>

</section>

</div>

<footer class="footer">
  Nexus Transport PR · Plataforma interna de operación
</footer>

<!-- APP LOGIC -->
<script src="app.js"></script>

</body>
</html>
